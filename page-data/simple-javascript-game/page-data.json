{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/simple-javascript-game",
    "result": {"data":{"markdownRemark":{"html":"<h2>Part I: Setup</h2>\n<p>Again, we're using <a href=\"https://www.pumatech.org\">Pumatech</a> today! To get started, go to <a href=\"https://www.pumatech.org\">https://www.pumatech.org</a>. When you're there create a new HTML document and save it as <code>brickbreaker.html</code>. Today's game we'll be creating is a Break Breaker ball game!</p>\n<p><img src=\"/img/mdn-breakout-gameplay.png\" alt=\"Image of Brick Breaker Game\" title=\"This is what you are going to build. SO COOL!\"></p>\n<h2>Part II: Creating the Canvas</h2>\n<h3>Creating the Canvas Base</h3>\n<p>First things first, we have to add the HTML document structure: html, head, and body. (Need a cheat sheet? Take a look at this <a href=\"https://docs.google.com/document/d/1R0S5fqrL8e_dMbramMEKRs6elU3VSHqHOLNP3rlm9fw/edit\">document</a>). Here's what your code should look like right now:</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n\n&#x3C;head>\n&#x3C;/head>\n\n&#x3C;body>\n&#x3C;/body>\n\n&#x3C;/html>\n</code></pre>\n<p>Seems simple right? This is because your game will be rendered entirely on the <code>&#x3C;canvas></code> element. Next, add in the following code:</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n\n&#x3C;head>\n&#x3C;meta charset=\"utf-8\" />\n&#x3C;title>&#x3C;/title> // Your amazing game title goes here!\n&#x3C;style>\n* {\npadding: 0;\nmargin: 0;\n}\n\ncanvas {\nbackground: #eee;\ndisplay: block;\nmargin: 0 auto;\n}\n\n&#x3C;/style>\n&#x3C;/head>\n\n&#x3C;body>\n&#x3C;canvas id=\"myCanvas\" width=\"480\" height=\"320\">&#x3C;/canvas>\n&#x3C;script>\n// JavaScript code goes here\n&#x3C;/script>\n&#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>In our code we have a <code>charset</code> defined, <code>&#x3C;title></code> and some CSS in the <code>&#x3C;head></code>. The charset attribute specifies the character encoding for the HTML document. The body contains <code>&#x3C;canvas></code> and <code>&#x3C;script></code> elements â€” we'll create the game inside the canva and write the JavaScript code that controls it in the script. The <code>&#x3C;canvas></code> element has an id of myCanvas, which allows us to easily get a reference to it, and it is 480 pixels wide and 320 pixels high. All the JavaScript code we will write today will go between the opening <code>&#x3C;script></code> and closing <code>&#x3C;/script></code> tags.</p>\n<h2>Part II: Adding the Ball</h2>\n<h3>1) Setting up</h3>\n<p>In order to create graphics on the <code>&#x3C;canvas></code>, we first have to grab a reference to it in JavaScript. Add the following under your opening <code>&#x3C;script></code> tag:</p>\n<pre><code>var canvas = document.getElementById(\"myCanvas\");\nvar ctx = canvas.getContext(\"2d\");\n</code></pre>\n<p>The first line of code is storing a reference to the <code>&#x3C;canvas></code> element, while the second line of code is using a <code>ctx</code> variable to store the 2D context (The tool we can use to paint on the canvas)</p>\n<p>Next, we'll be defining a starting point at the bottom center of our canvas by using variables called <code>x</code> and <code>y</code>, then use those to define the position the circle is drawn at. Add the following under the code you just wrote above:</p>\n<pre><code>var ballRadius = 10;\nvar x = canvas.width/2;\nvar y = canvas.height-30;\n</code></pre>\n<p>Next, we want to add a small value to x and y after every frame has been drawn to make it appear that the ball is moving. Let's call these small values as dx and dy and set their values to 2 and -2. Add them below your x and y variable definitions:</p>\n<pre><code>var dx = 2;var dy = -2;\n</code></pre>\n<h3>2) Adding our ball</h3>\n<p>As you can see from the header above, we're now going to be adding our ball! The following code below draws out and moves our ball:</p>\n<pre><code>function drawBall() {\nctx.beginPath();\nctx.arc(x, y, 10, 0, Math.PI*2);\nctx.fillStyle = \"#0095DD\";\nctx.fill();\nctx.closePath();\n}\n</code></pre>\n<p>The code below us shows the code for our paddle. It'll also tell us when it's game over. Put this right under the code above:</p>\n<pre><code>function draw() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  drawBricks();\n  drawBall();\n  drawPaddle();\n  drawScore();\n  drawLives();\n  collisionDetection();\n  if(x + dx > canvas.width-ballRadius || x + dx &#x3C; ballRadius) {\n    dx = -dx;\n  }\n  if(y + dy &#x3C; ballRadius) {\n    dy = -dy;\n  }\n  else if(y + dy > canvas.height-ballRadius) {\n    if(x > paddleX &#x26;&#x26; x &#x3C; paddleX + paddleWidth) {\n      dy = -dy;\n    }\n    else {\n      lives--;\n      if(!lives) {\n        alert(\"GAME OVER\");\n        document.location.reload();\n      }\n      else {\n        x = canvas.width/2;\n        y = canvas.height-30;\n        dx = 3;\n        dy = -3;\n        paddleX = (canvas.width-paddleWidth)/2;\n      }\n    }\n  }\n\n  if(rightPressed &#x26;&#x26; paddleX &#x3C; canvas.width-paddleWidth) {\n    paddleX += 7;\n  }\n  else if(leftPressed &#x26;&#x26; paddleX > 0) {\n    paddleX -= 7;\n  }\n\n  x += dx;\n  y += dy;\n  requestAnimationFrame(draw);\n}\n\ndraw();\n</code></pre>\n<h2>Part III: Adding a Paddle</h2>\n<p>So, now we need a paddle to hit the ball. Let's define a few variables for that. Add the following variables near the top of your code, under <code>var dy = -2;</code> :</p>\n<pre><code>var paddleHeight = 10;\nvar paddleWidth = 75;\nvar paddleX = (canvas.width-paddleWidth)/2;\nvar rightPressed = false;\nvar leftPressed = false;\n</code></pre>\n<p>The default value for the last two lines is false because at the beginning the control buttons are not pressed. To listen for key presses, we will set up two event listeners. Add the following lines just a few lines under the code above in your JavaScript:</p>\n<pre><code>document.addEventListener(\"keydown\", keyDownHandler, false);\ndocument.addEventListener(\"keyup\", keyUpHandler, false);\n</code></pre>\n<p>Now we need functions for when the keys are pressed. Add the following right under the code above:</p>\n<pre><code>function keyDownHandler(e) {\n    if(e.key == \"Right\" || e.key == \"ArrowRight\") {\n        rightPressed = true;\n  }\n    else if(e.key == \"Left\" || e.key == \"ArrowLeft\") {\n        leftPressed = true;\n  }\n}\nfunction keyUpHandler(e) {\n    if(e.key == \"Right\" || e.key == \"ArrowRight\") {\n        rightPressed = false;\n  }\n    else if(e.key == \"Left\" || e.key == \"ArrowLeft\") {\n        leftPressed = false;\n  }\n}\n</code></pre>\n<p>We cant play the game if there isn't a paddle! Add the following under <code>function drawBall() {:</code></p>\n<pre><code>function drawPaddle() {\n   ctx.beginPath();\n   ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);\n   ctx.fillStyle = \"#0095DD\";\n   ctx.fill();\n   ctx.closePath();\n}\n</code></pre>\n<h2>Part IV: Bricks</h2>\n<h3>1) Variables</h3>\n<p>First off, we need variables for our bricks. Add these below <code>var leftPressed = false;</code>:</p>\n<pre><code>var brickRowCount = 5;\nvar brickColumnCount = 3;\nvar brickWidth = 75;\nvar brickHeight = 20;\nvar brickPadding = 10;\nvar brickOffsetTop = 30;\nvar brickOffsetLeft = 30;\n</code></pre>\n<p>The code below loops around the rows and columns and create the new bricks. Add this right under the code you just wrote above:</p>\n<pre><code>var bricks = [];\nfor(var c=0; c&#x3C;brickColumnCount; c++) {\nbricks[c] = [];\nfor(var r=0; r&#x3C;brickRowCount; r++) {\nbricks[c][r] = { x: 0, y: 0, status: 1 };\n }\n}\n</code></pre>\n<h3>2) Drawing our bricks</h3>\n<p>We actually need bricks in order to play our game! Add this code below <code>function drawPaddle()</code>:</p>\n<pre><code>function drawBricks() {\n    for (var c = 0; c &#x3C; brickColumnCount; c++) {\n        for (var r = 0; r &#x3C; brickRowCount; r++) {\n            if (bricks[c][r].status == 1) {\n            var brickX = (c * (brickWidth + brickPadding)) + brickOffsetLeft;\n            var brickY = (r * (brickHeight + brickPadding)) + brickOffsetTop;\n            bricks[c][r].x = brickX;\n            bricks[c][r].y = brickY;\n            ctx.beginPath();\n            ctx.rect(brickX, brickY, brickWidth, brickHeight);\n            ctx.fillStyle = \"#0095DD\";\n            ctx.fill();\n            ctx.closePath();\n            }\n        }\n    }\n}\n</code></pre>\n<h3>3) Collision Detection</h3>\n<p>The code below enables collision detection between our ball and bricks. It also shows a \"You win!\" notification if you complete the game. Add this below function <code>keyUpHandler (e)</code>:</p>\n<pre><code>function collisionDetection() {\nfor (var c = 0; c &#x3C; brickColumnCount; c++) {\n    for (var r = 0; r &#x3C; brickRowCount; r++) {\n    var b = bricks[c][r];\n        if (b.status == 1) {\n            if (x > b.x &#x26;&#x26; x &#x3C; b.x + brickWidth &#x26;&#x26; y > b.y &#x26;&#x26; y &#x3C; b.y + brickHeight){\n                dy = -dy;\n                b.status = 0;\n                score++;\n                    if(score == brickRowCount*brickColumnCount) {\n                        alert(\"YOU WIN, CONGRATULATIONS!\");\n                        document.location.reload();\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h2>Part V: Adding our score</h2>\n<p>First off, we need our variables. Add this under <code>var brickOffsetLeft = 30;</code> :</p>\n<pre><code>var score = 0;\n</code></pre>\n<p>Next, we're going to add code that remembers our score. Add this code right under <code>function drawBricks()</code>:</p>\n<pre><code>function drawScore() {  ctx.font = \"16px Arial\";  ctx.fillStyle = \"#0095DD\";  ctx.fillText(\"Score: \"+score, 8, 20);}\n</code></pre>\n<h2>Part VI: Mouse Movement</h2>\n<p>All we need is a listener for mousemove. This next line of code can do that! Add this right under <code>document.addEventListener(\"keyup\", keyUpHandler, false);</code> :</p>\n<pre><code>document.addEventListener(\"mousemove\", mouseMoveHandler, false);\n</code></pre>\n<p>Next, we need a function to update the paddle position based on the pointer coordinates. Add this under the code you just inputted above:</p>\n<pre><code>function mouseMoveHandler(e) {\n    var relativeX = e.clientX - canvas.offsetLeft;\n    if(relativeX > 0 &#x26;&#x26; relativeX &#x3C; canvas.width) {\n        paddleX = relativeX - paddleWidth/2;\n    }\n}\n</code></pre>\n<h2>Part VII: Lives</h2>\n<p>We're almost done! The second to last step is adding lives. Add this variable under <code>var score=0;</code>:</p>\n<pre><code>var lives = 3;\n</code></pre>\n<p>Lastly, we need a function that can draw the score counter. Add this code right under <code>function drawScore()</code> :</p>\n<pre><code>function drawLives() {\n  ctx.font = \"16px Arial\";\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fillText(\"Lives: \"+lives, canvas.width-65, 20);\n}\n</code></pre>\n<p>Ta da! You did it! Now experiment with your game and make it unique!!! Let us know if you have any ideas that you want to create for next meeting!</p>\n<p><strong>P.S.</strong> If you are having any trouble with this article, feel free to see the original! <a href=\"https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript\">https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript</a></p>\n<p>Here is our final code:</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n\n&#x3C;head>\n&#x3C;meta charset=\"utf-8\" />\n&#x3C;title>&#x3C;/title>\n&#x3C;style>\n* {\npadding: 0;\nmargin: 0;\n}\n\ncanvas {\nbackground: #eee;\ndisplay: block;\nmargin: 0 auto;\n}\n\n&#x3C;/style>\n&#x3C;/head>\n\n&#x3C;body>\n&#x3C;canvas id=\"myCanvas\" width=\"480\" height=\"320\">&#x3C;/canvas>\n&#x3C;script>\nvar canvas = document.getElementById(\"myCanvas\");\nvar ctx = canvas.getContext(\"2d\");\nvar ballRadius = 10;\nvar x = canvas.width/2;\nvar y = canvas.height-30;\nvar dx = 2;\nvar dy = -2;\nvar paddleHeight = 10;\nvar paddleWidth = 75;\nvar paddleX = (canvas.width-paddleWidth)/2;\nvar rightPressed = false;\nvar leftPressed = false;\nvar brickRowCount = 5;\nvar brickColumnCount = 3;\nvar brickWidth = 75;\nvar brickHeight = 20;\nvar brickPadding = 10;\nvar brickOffsetTop = 30;\nvar brickOffsetLeft = 30;\nvar score = 0;\nvar lives = 3;\n\nvar bricks = [];\nfor(var c=0; c&#x3C;brickColumnCount; c++) {\n  bricks[c] = [];\n  for(var r=0; r&#x3C;brickRowCount; r++) {\n    bricks[c][r] = { x: 0, y: 0, status: 1 };\n  }\n}\n\ndocument.addEventListener(\"keydown\", keyDownHandler, false);\ndocument.addEventListener(\"keyup\", keyUpHandler, false);\ndocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\n\nfunction keyDownHandler(e) {\n    if(e.key == \"Right\" || e.key == \"ArrowRight\") {\n        rightPressed = true;\n    }\n    else if(e.key == \"Left\" || e.key == \"ArrowLeft\") {\n        leftPressed = true;\n    }\n}\n\nfunction keyUpHandler(e) {\n    if(e.key == \"Right\" || e.key == \"ArrowRight\") {\n        rightPressed = false;\n    }\n    else if(e.key == \"Left\" || e.key == \"ArrowLeft\") {\n        leftPressed = false;\n    }\n}\n\nfunction mouseMoveHandler(e) {\n  var relativeX = e.clientX - canvas.offsetLeft;\n  if(relativeX > 0 &#x26;&#x26; relativeX &#x3C; canvas.width) {\n    paddleX = relativeX - paddleWidth/2;\n  }\n}\nfunction collisionDetection() {\n  for(var c=0; c&#x3C;brickColumnCount; c++) {\n    for(var r=0; r&#x3C;brickRowCount; r++) {\n      var b = bricks[c][r];\n      if(b.status == 1) {\n        if(x > b.x &#x26;&#x26; x &#x3C; b.x+brickWidth &#x26;&#x26; y > b.y &#x26;&#x26; y &#x3C; b.y+brickHeight) {\n          dy = -dy;\n          b.status = 0;\n          score++;\n          if(score == brickRowCount*brickColumnCount) {\n            alert(\"YOU WIN, CONGRATS!\");\n            document.location.reload();\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction drawBall() {\n  ctx.beginPath();\n  ctx.arc(x, y, ballRadius, 0, Math.PI*2);\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fill();\n  ctx.closePath();\n}\nfunction drawPaddle() {\n  ctx.beginPath();\n  ctx.rect(paddleX, canvas.height-paddleHeight, paddleWidth, paddleHeight);\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fill();\n  ctx.closePath();\n}\nfunction drawBricks() {\n  for(var c=0; c&#x3C;brickColumnCount; c++) {\n    for(var r=0; r&#x3C;brickRowCount; r++) {\n      if(bricks[c][r].status == 1) {\n        var brickX = (r*(brickWidth+brickPadding))+brickOffsetLeft;\n        var brickY = (c*(brickHeight+brickPadding))+brickOffsetTop;\n        bricks[c][r].x = brickX;\n        bricks[c][r].y = brickY;\n        ctx.beginPath();\n        ctx.rect(brickX, brickY, brickWidth, brickHeight);\n        ctx.fillStyle = \"#0095DD\";\n        ctx.fill();\n        ctx.closePath();\n      }\n    }\n  }\n}\nfunction drawScore() {\n  ctx.font = \"16px Arial\";\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fillText(\"Score: \"+score, 8, 20);\n}\nfunction drawLives() {\n  ctx.font = \"16px Arial\";\n  ctx.fillStyle = \"#0095DD\";\n  ctx.fillText(\"Lives: \"+lives, canvas.width-65, 20);\n}\n\nfunction draw() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  drawBricks();\n  drawBall();\n  drawPaddle();\n  drawScore();\n  drawLives();\n  collisionDetection();\n\n  if(x + dx > canvas.width-ballRadius || x + dx &#x3C; ballRadius) {\n    dx = -dx;\n  }\n  if(y + dy &#x3C; ballRadius) {\n    dy = -dy;\n  }\n  else if(y + dy > canvas.height-ballRadius) {\n    if(x > paddleX &#x26;&#x26; x &#x3C; paddleX + paddleWidth) {\n      dy = -dy;\n    }\n    else {\n      lives--;\n      if(!lives) {\n        alert(\"GAME OVER\");\n        document.location.reload();\n      }\n      else {\n        x = canvas.width/2;\n        y = canvas.height-30;\n        dx = 3;\n        dy = -3;\n        paddleX = (canvas.width-paddleWidth)/2;\n      }\n    }\n  }\n\n  if(rightPressed &#x26;&#x26; paddleX &#x3C; canvas.width-paddleWidth) {\n    paddleX += 7;\n  }\n  else if(leftPressed &#x26;&#x26; paddleX > 0) {\n    paddleX -= 7;\n  }\n\n  x += dx;\n  y += dy;\n  requestAnimationFrame(draw);\n}\n\ndraw();\n&#x3C;/script>\n&#x3C;/body>\n&#x3C;/html>\n</code></pre>","frontmatter":{"title":"P2P Hack Club Meeting 4: Create a simple game using JavaScript!","author":"P2P hack club team, modified from an article by MDN"}}},"pageContext":{"slug":"/simple-javascript-game"}},
    "staticQueryHashes": []}